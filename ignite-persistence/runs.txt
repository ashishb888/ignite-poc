RUN 1

2019-12-23 18:01:03.958  INFO 166755 --- [           main] poc.ignite.IgniteApp                     : Started IgniteApp in 7.261 seconds (JVM running for 7.733)
2019-12-23 18:01:03.959  INFO 166755 --- [           main] poc.ignite.IgniteApp                     : run service
2019-12-23 18:01:03.959 DEBUG 166755 --- [           main] poc.ignite.service.IgniteService         : main service
2019-12-23 18:01:03.960 DEBUG 166755 --- [           main] p.i.service.SimplePersistenceService     : main service
2019-12-23 18:01:03.960 DEBUG 166755 --- [           main] p.i.service.SimplePersistenceService     : start service
2019-12-23 18:01:03.971 DEBUG 166755 --- [           main] poc.ignite.repos.CacheRepository         : personCache repo

[user@host ~]$ $IGNITE_HOME/bin/sqlline.sh --verbose=true -u jdbc:ignite:thin://localhost:10800
issuing: !connect jdbc:ignite:thin://localhost:10800 '' '' org.apache.ignite.IgniteJdbcThinDriver
Connecting to jdbc:ignite:thin://localhost:10800
Connected to: Apache Ignite (version 2.6.0#20180710-sha1:669feacc)
Driver: Apache Ignite Thin JDBC Driver (version 8.7.6#20190704-sha1:6449a674)
Autocommit status: true
Transaction isolation: TRANSACTION_REPEATABLE_READ
sqlline version 1.3.0
0: jdbc:ignite:thin://localhost:10800>
0: jdbc:ignite:thin://localhost:10800> select count(*) from "STS".person;
+--------------------------------+
|            COUNT(*)            |
+--------------------------------+
| 500                            |
+--------------------------------+

----------==----------

RUN 2

[user@host apache-ignite-fabric-2.6.0-bin]$ bin/control.sh --baseline
Control utility [ver. 2.6.0#20180710-sha1:669feacc]
2018 Copyright(C) Apache Software Foundation
User: user
--------------------------------------------------------------------------------
Cluster state: active
Current topology version: 7

Baseline nodes:
    ConsistentID=2dc61561-1e46-48cf-a036-06d9f0467438, STATE=ONLINE
--------------------------------------------------------------------------------
Number of baseline nodes: 1

Other nodes:
    ConsistentID=e465d475-8ce6-47a2-8b33-0dedf5a0e526
Number of other nodes: 1
[user@host apache-ignite-fabric-2.6.0-bin]$
[user@host apache-ignite-fabric-2.6.0-bin]$

----------==----------
RUN 3

[user@host ignite-persistence-data-node]$ $JAVA_HOME/bin/java -Xms1G -Xmx1G -Dlogging.file=/var/tmp/logs/ignite-persistence-data-node/ignite-persistence-data-node1 -jar ignite-persistence-data-node-0.0.1-SNAPSHOT.jar
[user@host ignite-persistence-data-node]$ $JAVA_HOME/bin/java -Xms1G -Xmx1G -Dlogging.file=/var/tmp/logs/ignite-persistence-data-node/ignite-persistence-data-node2 -jar ignite-persistence-data-node-0.0.1-SNAPSHOT.jar
[user@host ignite-persistence]$ $JAVA_HOME/bin/java -Xms1G -Xmx1G  -jar ignite-persistence-0.0.1-SNAPSHOT.jar

[user@host apache-ignite-fabric-2.6.0-bin]$ ./bin/control.sh --baseline
Control utility [ver. 2.6.0#20180710-sha1:669feacc]
2018 Copyright(C) Apache Software Foundation
User: user
--------------------------------------------------------------------------------
Cluster state: active
Current topology version: 3

Baseline nodes:
    ConsistentID=b72461e5-5076-42aa-8444-95e385a806b4, STATE=ONLINE
    ConsistentID=cc76676c-4eb8-450d-8853-4faeb9acf671, STATE=ONLINE
--------------------------------------------------------------------------------
Number of baseline nodes: 2

Other nodes not found.
[user@host apache-ignite-fabric-2.6.0-bin]$


----------==----------
RUN 4

[user@host apache-ignite-fabric-2.6.0-bin]$ ./bin/control.sh --baseline
Control utility [ver. 2.6.0#20180710-sha1:669feacc]
2018 Copyright(C) Apache Software Foundation
User: user
--------------------------------------------------------------------------------
Cluster state: active
Current topology version: 10

Baseline nodes:
    ConsistentID=b72461e5-5076-42aa-8444-95e385a806b4, STATE=ONLINE
    ConsistentID=cc76676c-4eb8-450d-8853-4faeb9acf671, STATE=ONLINE
--------------------------------------------------------------------------------
Number of baseline nodes: 2

Other nodes not found.

----------After killing a node----------

[user@host apache-ignite-fabric-2.6.0-bin]$ ./bin/control.sh --baseline
Control utility [ver. 2.6.0#20180710-sha1:669feacc]
2018 Copyright(C) Apache Software Foundation
User: user
--------------------------------------------------------------------------------
Cluster state: active
Current topology version: 11

Baseline nodes:
    ConsistentID=b72461e5-5076-42aa-8444-95e385a806b4, STATE=ONLINE
    ConsistentID=cc76676c-4eb8-450d-8853-4faeb9acf671, STATE=OFFLINE
--------------------------------------------------------------------------------
Number of baseline nodes: 2

Other nodes not found.
[user@host apache-ignite-fabric-2.6.0-bin]$

----------==----------
RUN 5

[user@host apache-ignite-fabric-2.6.0-bin]$ ./bin/control.sh  --activate
Control utility [ver. 2.6.0#20180710-sha1:669feacc]
2018 Copyright(C) Apache Software Foundation
User: user
--------------------------------------------------------------------------------
Cluster activated
[user@host apache-ignite-fabric-2.6.0-bin]$ ./bin/control.sh --baseline
Control utility [ver. 2.6.0#20180710-sha1:669feacc]
2018 Copyright(C) Apache Software Foundation
User: user
--------------------------------------------------------------------------------
Cluster state: active
Current topology version: 4

Baseline nodes:
    ConsistentID=2ecd6f67-c7e6-49bf-86de-efbe407f6496, STATE=ONLINE
    ConsistentID=b8067f87-201f-4083-bd87-ec817801884c, STATE=ONLINE
--------------------------------------------------------------------------------
Number of baseline nodes: 2

Other nodes not found.
[user@host apache-ignite-fabric-2.6.0-bin]$

[user@host apache-ignite-fabric-2.6.0-bin]$ ./bin/control.sh --state
Control utility [ver. 2.6.0#20180710-sha1:669feacc]
2018 Copyright(C) Apache Software Foundation
User: user
--------------------------------------------------------------------------------
Cluster is active
[user@host apache-ignite-fabric-2.6.0-bin]$


[user@host apache-ignite-fabric-2.6.0-bin]$ $IGNITE_HOME/bin/sqlline.sh --verbose=true -u jdbc:ignite:thin://host
issuing: !connect jdbc:ignite:thin://host '' '' org.apache.ignite.IgniteJdbcThinDriver
Connecting to jdbc:ignite:thin://host
Connected to: Apache Ignite (version 2.6.0#20180710-sha1:669feacc)
Driver: Apache Ignite Thin JDBC Driver (version 2.6.0#20180710-sha1:669feacc)
Autocommit status: true
Transaction isolation: TRANSACTION_REPEATABLE_READ
sqlline version 1.3.0
0: jdbc:ignite:thin://host> !tables
+--------------------------------+--------------------------------+--------------------------------+--------------------------------+--------------------------------+------------------------------+
|           TABLE_CAT            |          TABLE_SCHEM           |           TABLE_NAME           |           TABLE_TYPE           |            REMARKS             |            TYPE_CAT          |
+--------------------------------+--------------------------------+--------------------------------+--------------------------------+--------------------------------+------------------------------+
|                                | STS                            | PERSON                         | TABLE                          |                                |                              |
+--------------------------------+--------------------------------+--------------------------------+--------------------------------+--------------------------------+------------------------------+
0: jdbc:ignite:thin://host> select count(*) from "STS".PERSON;
+--------------------------------+
|            COUNT(*)            |
+--------------------------------+
| 10                             |
+--------------------------------+
1 row selected (0.156 seconds)
0: jdbc:ignite:thin://host> select * from "STS".PERSON;
+--------------------------------+--------------------------------+--------------------------------+
|               ID               |             CITYID             |              NAME              |
+--------------------------------+--------------------------------+--------------------------------+
| 1                              | 1                              | p1                             |
| 2                              | 2                              | p2                             |
| 7                              | 7                              | p7                             |
| 8                              | 8                              | p8                             |
| 0                              | 0                              | p0                             |
| 3                              | 3                              | p3                             |
| 4                              | 4                              | p4                             |
| 5                              | 5                              | p5                             |
| 6                              | 6                              | p6                             |
| 9                              | 9                              | p9                             |
+--------------------------------+--------------------------------+--------------------------------+
10 rows selected (0.029 seconds)
0: jdbc:ignite:thin://host>

----------After killing a node----------

0: jdbc:ignite:thin://host> select * from "STS".PERSON;
+--------------------------------+--------------------------------+--------------------------------+
|               ID               |             CITYID             |              NAME              |
+--------------------------------+--------------------------------+--------------------------------+
| 1                              | 1                              | p1                             |
| 2                              | 2                              | p2                             |
| 7                              | 7                              | p7                             |
| 8                              | 8                              | p8                             |
+--------------------------------+--------------------------------+--------------------------------+
4 rows selected (0.014 seconds)
0: jdbc:ignite:thin://host> select count(*) from "STS".PERSON;
+--------------------------------+
|            COUNT(*)            |
+--------------------------------+
| 4                              |
+--------------------------------+
1 row selected (0.005 seconds)
0: jdbc:ignite:thin://host>
